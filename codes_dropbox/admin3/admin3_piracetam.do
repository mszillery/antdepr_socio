
*antidep
use "/homeProspSSD/Admin3_H2_NEAK_veny/admin3_eu_veny_H2_v2.dta", clear


keep anon t N06
keep if N06~=.

gen ev=2003+int((t-1)/12)

cap drop cav
gen cav=.
replace cav=N06 if inlist(N06, 717, 718, 761, 798, 1140, 1141, 1673, 1678)
replace cav=N06 if inlist(N06, 717*2, 718*2, 761*2, 798*2, 1140*2, 1141*2, 1673*2, 1678*2)
replace cav=N06 if inlist(N06, 717*3, 718*3, 761*3, 798*3, 1140*3, 1141*3, 1673*3, 1678*3)
replace cav=N06 if inlist(N06, 717*4, 718*4, 761*4, 798*4, 1140*4, 1141*4, 1673*4, 1678*4)
cap drop pir
gen pir=.
replace pir=N06 if inlist(N06, 483, 513, 529, 561, 677, 699, 719, 720, 820, 822, 963, 985, 1318, 1332, 1402, 1403, 1413, 1414, 1427, 1428, 1445, 1454, 1455, 1566, 1581, 1586, 1597, 1618, 1633, 1655, 1698, 1715, 1725, 1750, 1752, 1801, 1824, 1843, 2158, 2168, 2196, 2210, 2226, 2245, 2246, 2248, 2259, 2266, 2274, 2279, 2299, 2313, 2337, 2339, 2357, 2368, 2383, 2435, 2524, 2579, 2586, 2629, 2634, 2673, 2674, 2743, 2817, 2821, 2824, 2833, 2870, 2873, 2880, 2883, 2984, 2997, 3060, 3582, 3591)
replace pir=N06 if inlist(N06, 483*2, 513*2, 529*2, 561*2, 677*2, 699*2, 719*2, 720*2, 820*2, 822*2, 963*2, 985*2, 1318*2, 1332*2, 1402*2, 1403*2, 1413*2, 1414*2, 1427*2, 1428*2, 1445*2, 1454*2, 1455*2, 1566*2, 1581*2, 1586*2, 1597*2, 1618*2, 1633*2, 1655*2, 1698*2, 1715*2, 1725*2, 1750*2, 1752*2, 1801*2, 1824*2, 1843*2, 2158*2, 2168*2, 2196*2, 2210*2, 2226*2, 2245*2, 2246*2, 2248*2, 2259*2, 2266*2, 2274*2, 2279*2, 2299*2, 2313*2, 2337*2, 2339*2, 2357*2, 2368*2, 2383*2, 2435*2, 2524*2, 2579*2, 2586*2, 2629*2, 2634*2, 2673*2, 2674*2, 2743*2, 2817*2, 2821*2, 2824*2, 2833*2, 2870*2, 2873*2, 2880*2, 2883*2, 2984*2, 2997*2, 3060*2, 3582*2, 3591*2)
replace pir=N06 if inlist(N06, 483*3, 513*3, 529*3, 561*3, 677*3, 699*3, 719*3, 720*3, 820*3, 822*3, 963*3, 985*3, 1318*3, 1332*3, 1402*3, 1403*3, 1413*3, 1414*3, 1427*3, 1428*3, 1445*3, 1454*3, 1455*3, 1566*3, 1581*3, 1586*3, 1597*3, 1618*3, 1633*3, 1655*3, 1698*3, 1715*3, 1725*3, 1750*3, 1752*3, 1801*3, 1824*3, 1843*3, 2158*3, 2168*3, 2196*3, 2210*3, 2226*3, 2245*3, 2246*3, 2248*3, 2259*3, 2266*3, 2274*3, 2279*3, 2299*3, 2313*3, 2337*3, 2339*3, 2357*3, 2368*3, 2383*3, 2435*3, 2524*3, 2579*3, 2586*3, 2629*3, 2634*3, 2673*3, 2674*3, 2743*3, 2817*3, 2821*3, 2824*3, 2833*3, 2870*3, 2873*3, 2880*3, 2883*3, 2984*3, 2997*3, 3060*3, 3582*3, 3591*3)
replace pir=N06 if inlist(N06, 483*4, 513*4, 529*4, 561*4, 677*4, 699*4, 719*4, 720*4, 820*4, 822*4, 963*4, 985*4, 1318*4, 1332*4, 1402*4, 1403*4, 1413*4, 1414*4, 1427*4, 1428*4, 1445*4, 1454*4, 1455*4, 1566*4, 1581*4, 1586*4, 1597*4, 1618*4, 1633*4, 1655*4, 1698*4, 1715*4, 1725*4, 1750*4, 1752*4, 1801*4, 1824*4, 1843*4, 2158*4, 2168*4, 2196*4, 2210*4, 2226*4, 2245*4, 2246*4, 2248*4, 2259*4, 2266*4, 2274*4, 2279*4, 2299*4, 2313*4, 2337*4, 2339*4, 2357*4, 2368*4, 2383*4, 2435*4, 2524*4, 2579*4, 2586*4, 2629*4, 2634*4, 2673*4, 2674*4, 2743*4, 2817*4, 2821*4, 2824*4, 2833*4, 2870*4, 2873*4, 2880*4, 2883*4, 2984*4, 2997*4, 3060*4, 3582*4, 3591*4)
gen antidep=N06
replace antidep=. if (pir~=. | cav~=.)
*hist antidep if ev>=2010 & ev<=2013 & antidep<5000 & antidep>0, by(ev)
*hist antidep if ev>=2013 & ev<=2016 & antidep<5000 & antidep>0, by(ev)

tabstat antidep, by(ev) stat(sum)

gcollapse (sum) antidep cav pir, by(anon ev)

save "/homeKRTK/egeszseg_dekomp/antidep_ev.dta", replace